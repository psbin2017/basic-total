# ✨ 아이템 61: 박싱된 기본 타입보다는 기본 타입을 사용하라

자바 데이터 타입은 프리미티브 타입과 참조 타입이 있다. 그리고 각각 기본 타입에는 대응하는 참조타입이 있으며 이를 박싱된 기본 타입이라 한다.

기본 타입과 박싱된 기본 타입의 차이는 크게 3가지다.

1. 기본 타입은 값만 가지고 있으나 박싱된 기본 타입은 값과 식별성이라는 속성을 가진다. (이때문에 값이 같아도 식별자가 달라 서로 다르다.)
2. 기본 타입은 언제나 유효하지만 박싱된 기본 타입은 유효하지 않은 null 을 가질 수 있다.
3. 기본 타입이 박싱된 기본 타입보다 시간가 메모리 사용 측면에서 효율적이다.

```java
Comparator<Integer> natualOrder = (i, j) -> (i < j>) ? -1 : (i == j ? 0 : 1);
```

`naturalOrder.compare(new Integer(42), new Integer(42))` 의 경우 두 인스턴스 값이 0 을 원하지만 실제로는 1 을 출력한다. 이는 두 객체 참조의 식별성을 검사하기 때문에 false 가 되어 1 을 반환하였다.

이처럼 박싱된 기본 타입에 == 연산자를 사용하면 의도하지 않은 문제가 발생한다.

```java
Comparator<Integer> natualOrder = (iBoxed, jBoxed) -> {
    int i = iBoxed;
    int j = jBoxed;
    (i < j>) ? -1 : (i == j ? 0 : 1);
}
```

그리고 거의 예외 없이 **기본 타입과 박싱된 기본타입을 혼용한 연산에서는 박싱된 기본 타입의 박싱이 자동으로 풀린다.**

```java
Integer i;
if ( i == 42) {
    // ...
}
```

`Integer` 와 `int` 를 비교하는 시점에서 `int` 로 되면서 null 참조를 언박싱 하게되고 이때 NPE 가 발생한다.

```java
Long sum = 0L
for (long i = 0; i <= Integer.MAX_VALUE; i++) {
    sum += i;
}
```

위 경우 박싱과 언박싱이 반복하여 일어나 체감될 정도로 느려진다.

박싱된 기본 타입을 잘 사용하는 방법은 다음과 같다.

1. 컬렉션의 원소, 키, 값으로 사용한다. (어차피 박싱된 기본 타입밖에 못쓴다.)
2. 리플렉션을 통해서 메소드를 호출할 때 박싱된 기본 타입을 사용해야 한다.
