# ✨ 아이템 87: 커스텀 직렬화 형태를 고려해보라

> 고민하고 괜찮다고 판단될 때만 기본 직렬화 형태를 사용하라.

객체의 물리적 표현과 논리적 내용이 같다면 기본 직렬화 형태라도 무방하다.

```java
public class Name implements Serializable {

    /**
     * null 이 아니어야 함.
     * @serial
     */
    private final String lastName;

    /**
     * null 이 아니어야 함.
     * @serial
     */
    private final String firstName;

    /**
     * null 이 아니어야 함.
     * @serial
     */
    private final String middleName;
}
```

불변식 보장과 보안을 위해 `readObject` 메소드를 제공해야 할 때가 많다.

모든 필드에 문서화 주석을 작성하였으며, `@serial` 태그는 API 문서에서 직렬화 형태를 설명하는 특별한 페이지에 기록된다.

> 객체의 물리적인 표현과 논리적읜 차이가 클 때 기본 직렬화 형태를 사용하면 문제가 생긴다.

1. 공개 API 현재의 내부 표현 방식에 영구히 묶인다.
2. 너무 많은 공간을 차지할 수 있다.
3. 시간이 너무 많이 걸릴 수 있다.
4. 스택 오버플로를 일으킬 수 있다.

합리적인 커스텀 직렬화 형태는 무엇일까?

1. 직렬화 대상에 불필요한 필드를 제외한다. `transient` 한정자는 인스턴스 필드가 기본 직렬화 형태에 포함되지 않도록 한다.
2. 객체의 전체 상태를 읽는 메소드에 적용해야하는 동기화 메커니즘을 직렬화에도 적용한다.
3. 직렬 버전 UID 를 명시적으로 부여한다.
